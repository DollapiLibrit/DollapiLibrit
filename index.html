<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B√´j Porosin√´</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    margin:0;
    font-family:'Roboto',sans-serif;
    background: linear-gradient(135deg,#ff416c,#ff4b2b);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
  }

  .form-container {
    background:white;
    border-radius:20px;
    padding:40px;
    width:90%;
    max-width:450px;
    box-shadow:0 10px 40px rgba(0,0,0,0.2);
    animation:slideIn 1s ease;
    position: relative;
  }

  @keyframes slideIn { from{transform:translateY(-50px);opacity:0;} to{transform:translateY(0);opacity:1;} }

  h2{text-align:center;margin-bottom:30px;color:#333;}

  .input-group{position:relative;margin-bottom:25px;}
  input,textarea{
    width:100%;
    padding:15px;
    border:2px solid #ddd;
    border-radius:10px;
    outline:none;
    transition:border-color 0.3s,font-size 0.3s;
    font-size:1em;
    background:none;
  }
  input:focus,textarea:focus{border-color:#ff416c;}
  label{
    position:absolute;left:15px;top:15px;color:#aaa;
    pointer-events:none;
    transition:0.3s ease all;
  }
  input:focus + label,input:not(:placeholder-shown) + label,
  textarea:focus + label,textarea:not(:placeholder-shown) + label{
    top:-10px;left:10px;font-size:0.8em;color:#ff416c;
    background:white;padding:0 5px;
  }

  button{
    width:100%;
    padding:15px;
    border:none;
    border-radius:10px;
    background:#ff416c;
    color:white;
    font-size:1em;
    font-weight:bold;
    cursor:pointer;
    transition:0.3s ease all;
  }
  button:hover{background:#ff4b2b;transform:scale(1.05);}

  #msg{
    text-align:center;
    margin-top:15px;
    font-weight:bold;
    color:white;
    min-height:20px;
  }

  /* Confirmation modal */
  .modal-bg {
    position: fixed;
    top:0; left:0;
    width:100%; height:100%;
    background: rgba(0,0,0,0.5);
    display:none;
    justify-content:center;
    align-items:center;
    z-index: 999;
  }
  .modal {
    background:white;
    padding:30px;
    border-radius:15px;
    text-align:center;
    max-width:300px;
    animation:fadeIn 0.3s ease;
  }
  .modal button { margin:10px 5px; }
  @keyframes fadeIn { from{opacity:0;} to{opacity:1;} }

  /* Success animation */
  .success-check {
    position:absolute;
    top:50%; left:50%;
    transform:translate(-50%, -50%);
    font-size:50px;
    color:#4BB543;
    display:none;
  }

</style>
</head>
<body>

<div class="form-container">
  <h2>B√´j Porosin√´</h2>
  <form id="orderForm">
    <div class="input-group">
      <input type="text" name="name" placeholder=" " required>
      <label>Emri</label>
    </div>
    <div class="input-group">
      <input type="text" name="address" placeholder=" " required pattern="^\+?\d{7,15}$">
      <label>Numbri (Vet√´m numra, me + opsionale)</label>
    </div>
    <div class="input-group">
      <textarea name="order" placeholder=" " rows="4" required></textarea>
      <label>Libri q√´ doni ta porositni dhe sa cop√´</label>
    </div>
    <button type="submit">D√´rgo Porosin√´</button>
  </form>
  <p id="msg"></p>
  <div class="success-check">‚úîÔ∏è</div>
</div>

<!-- Confirmation modal -->
<div class="modal-bg" id="confirmModal">
  <div class="modal">
    <p>A jeni t√´ sigurt q√´ doni t√´ d√´rgoni porosin√´?</p>
    <button id="confirmYes">Po</button>
    <button id="confirmNo">Jo</button>
  </div>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbxJXNRDgopGo3Xie_fgm8Vm1KOF5CsnAbl_5_gtifWoUNcvDBVN1sRukS1yLe6EwGVtnQ/exec";
const form = document.getElementById("orderForm");
const msg = document.getElementById("msg");
const modal = document.getElementById("confirmModal");
const successCheck = document.querySelector(".success-check");
let formDataStore;

form.addEventListener("submit", e => {
  e.preventDefault();
  formDataStore = new FormData(form);
  modal.style.display = "flex"; // show confirmation
});

document.getElementById("confirmYes").addEventListener("click", async () => {
  modal.style.display = "none";
  msg.innerText = "Duke d√´rguar...";
  try {
    const response = await fetch(scriptURL, { method:"POST", body:formDataStore });
    if(response.ok){
      msg.innerText = "üéâ Porosia u d√´rgua me sukses!";
      successCheck.style.display = "block";
      setTimeout(()=>successCheck.style.display="none",1500);
      form.reset();
    } else {
      msg.innerText = "‚ùå Gabim gjat√´ d√´rgimit t√´ porosis√´.";
    }
  } catch (err){
    msg.innerText = "‚ùå Gabim gjat√´ d√´rgimit t√´ porosis√´.";
    console.error(err);
  }
});

document.getElementById("confirmNo").addEventListener("click", () => {
  modal.style.display = "none";
  msg.innerText = "";
});
</script>

</body>
</html>
